<% provide(:title, "Nuevo archivo") %>

<script>
  $(document).ready(function(){
    updateWordsCounter("#project_file_description", 300, "#wordsCounter");

    $("#project_file_description").keyup(function(){
      updateWordsCounter("#project_file_description", 300, "#wordsCounter");
      return false;
    });    
  });
</script>

<div class="mainContainer container">
  <div class="col-md-6 col-md-offset-3">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <strong>Subir nuevo archivo</strong>
      </div>
      <div class="panel-body">
      <%= form_for(@project_file, :html => { :class => "form form-horizontal"}) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>

        <%= hidden_field_tag 'project_id', params[:project_id] %>

        <div class="form-group">
          <%= f.label :project_name, "Proyecto: ", class: 'col-sm-4 control-label' %>
          <div class="col-sm-7">
            <%= f.text_field :project_name, class: "form-control", disabled: 'disabled', value: @project.name %>
          </div>
        </div>

        <div class="form-group">
          <%= f.label :description, "Archivo: ", class: 'col-sm-4 control-label' %>
          <div class="col-sm-7">
            <%= f.file_field :attachment %>
          </div>
        </div>

        <div class="form-group">
          <%= f.label :name, "Nombre del archivo: ", class: 'col-sm-4 control-label' %>
          <div class="col-sm-7">
            <%= f.text_field :name, class:"form-control" %>
          </div>
        </div>

        <div class="form-group">
          <%= f.label :description, "DescripciÃ³n: ", class: 'col-sm-4 control-label' %>
          <div class="col-sm-7">
            <%= f.text_area :description, cols: 20, rows: 8, maxlength: 300, class: 'form-control', id: 'project_file_description' %>
            <span id="wordsCounter" class="label label-info"></span>
          </div>
        </div>

      </div>
      <div class="panel-footer">
        <div class="form-group centered">
          <%= f.submit 'Subir archivo', class: 'btn btn-large btn-primary' %>
          <%= link_to "Cancelar", @project, class:"btn btn-default" %>
        </div>
      </div>

      <% end %>
    </div>
  </div>
</div>
